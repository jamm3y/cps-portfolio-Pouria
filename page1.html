<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>What I Learned - Page 1</title>

    <style>
        body {
            background-color: #cce5ff;
            font-family: Arial, sans-serif;
            margin: 0;
        }

        .nav {
            background-color: #ffffff;
            padding: 10px;
            border-bottom: 2px solid black;
            text-align: center;
        }

        .nav a {
            margin: 0 15px;
            text-decoration: none;
            color: black;
            font-weight: bold;
        }

        canvas {
            display: block;
            background-color: black;
            margin: 20px auto;
        }
    </style>
</head>
<body>

    <!-- NAVIGATION -->
    <div class="nav">
        <a href="index.html">Home</a>
        <a href="page1.html">Game Page</a>
        <a href="page2.html">Page 2</a>
    </div>

    <h1 style="text-align:center;">What I Learned (Page 1)</h1>

    <p style="text-align:center;">
        This page contains a playable game made with JavaScript and HTML Canvas.
    </p>

    <!-- GAME CANVAS -->
    <canvas id="gameCanvas" width="1000" height="800"></canvas>

    <script>
        /* ===============================
           PLAYER + CAMERA VARIABLES
        =============================== */
        let where = 0;
        let camSensitivity = 2;
        let playerPos = [1, 0, 0];

        /* ===============================
           ENTITY SETUP
        =============================== */
        let godImage = new Image();
        godImage.src = "OGOD.png";

        let god = [10, 0, 0, godImage];
        let everything = [god];

        /* ===============================
           CANVAS SETUP
        =============================== */
        const canvas = document.getElementById("gameCanvas");
        const ctx = canvas.getContext("2d");

        /* ===============================
           INPUT HANDLING
        =============================== */
        let keys = {};

        document.addEventListener("keydown", e => {
            keys[e.key] = true;

            // SPACEBAR SPAWNS IMAGE
            if (e.code === "Space") {
                spawnRandomImage();
            }
        });

        document.addEventListener("keyup", e => {
            keys[e.key] = false;
        });

        /* ===============================
           SPAWNED IMAGES
        =============================== */
        let spawnedImages = [];

        let spawnImage = new Image();
        spawnImage.src = "OGOD.png"; // change if you want

        function spawnRandomImage() {
            let randomX = Math.floor(Math.random() * 100) + 1;
            let randomY = Math.floor(Math.random() * 100) + 1;

            spawnedImages.push({
                x: randomX * 8, // scale to canvas width
                y: randomY * 6  // scale to canvas height
            });
        }

        /* ===============================
           PLAYER MOVEMENT / CAMERA
        =============================== */
        function look() {
            if (keys["ArrowLeft"]) where -= camSensitivity;
            if (keys["ArrowRight"]) where += camSensitivity;

            where = (where + 180) % 360 - 180;

            let angleRad = where * Math.PI / 180;
            let moveX = Math.cos(angleRad);
            let moveZ = Math.sin(angleRad);

            if (keys["ArrowUp"]) {
                playerPos[0] += moveX;
                playerPos[2] += moveZ;
            }
            if (keys["ArrowDown"]) {
                playerPos[0] -= moveX;
                playerPos[2] -= moveZ;
            }
        }

        /* ===============================
           RENDERING
        =============================== */
        function render() {
            // Draw spawned images
            for (let img of spawnedImages) {
                ctx.drawImage(spawnImage, img.x, img.y, 50, 50);
            }

            // Draw 3D-style entities
            for (let entity of everything) {
                let dx = entity[0] - playerPos[0];
                let dz = entity[2] - playerPos[2];

                let distance = Math.sqrt(dx * dx + dz * dz);
                if (distance <= 0.01) continue;

                let angle = Math.atan2(dz, dx) * 180 / Math.PI;
                let relative = angle - where;
                relative = (relative + 180) % 360 - 180;

                let FOV = 90;
                if (Math.abs(relative) > FOV / 2) continue;

                let screenX = (relative / (FOV / 2)) * 500 + canvas.width / 2;
                let size = 600 / distance;

                ctx.drawImage(
                    entity[3],
                    screenX - size / 2,
                    canvas.height / 2 - size / 2,
                    size,
                    size
                );
            }
        }

        /* ===============================
           GAME LOOP
        =============================== */
        function gameLoop() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            look();
            render();
            requestAnimationFrame(gameLoop);
        }

        gameLoop();
    </script>

    <!-- BOTTOM NAV -->
    <div class="nav">
        <a href="index.html">Home</a>
        <a href="page1.html">Game Page</a>
        <a href="page2.html">Page 2</a>
    </div>

</body>
</html>
